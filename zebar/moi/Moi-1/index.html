<!DOCTYPE html>
<!-- saved from url=(0039)http://127.0.0.1:6124/with-glazewm.html -->
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      data-zebar=""
      rel="stylesheet"
      type="text/css"
      href="./with-glazewm_files/normalize.css"
    />
    <link data-zebar="" rel="icon" href="data:;" />

    <!-- Custom styles. -->
    <link
      rel="stylesheet"
      type="text/css"
      href="./with-glazewm_files/styles.css"
    />

    <!-- Allows React to be run buildless via "text/babel" script below. -->
    <script
      src="./with-glazewm_files/babel.min.js.download"
      integrity="sha256-aS0B0wnsaDByLfE16h4MDCP1fQFccysd1YWOcV+gbBo="
      crossorigin="anonymous"
    ></script>
    <script type="module">
      import React, { useState, useEffect } from "https://esm.sh/react@18?dev";
      import { createRoot } from "https://esm.sh/react-dom@18/client?dev";
      import * as zebar from "https://esm.sh/zebar@3.0";
      var providers = zebar.createProviderGroup({
        network: {
          type: "network",
        },
        glazewm: {
          type: "glazewm",
        },
        cpu: {
          type: "cpu",
        },
        date: {
          type: "date",
          formatting: "EEE, d MMM TT",
        },
        battery: {
          type: "battery",
        },
        memory: {
          type: "memory",
        },
        weather: {
          type: "weather",
        },
      });
      createRoot(document.getElementById("root")).render(
        /*#__PURE__*/ React.createElement(App, null)
      );
      function App() {
        var _output$date, _output$network$defau;
        var [output, setOutput] = useState(providers.outputMap);
        useEffect(() => {
          providers.onOutput(() => setOutput(providers.outputMap));
        }, []);

        // Get icon to show for current network status.
        function getNetworkIcon(networkOutput) {
          var _networkOutput$defaul,
            _networkOutput$defaul2,
            _networkOutput$defaul3,
            _networkOutput$defaul4,
            _networkOutput$defaul5;
          switch (
            (_networkOutput$defaul = networkOutput.defaultInterface) === null ||
            _networkOutput$defaul === void 0
              ? void 0
              : _networkOutput$defaul.type
          ) {
            case "ethernet":
              return /*#__PURE__*/ React.createElement("i", {
                className: "nf nf-md-ethernet_cable",
              });
            case "proprietary_virtual":
              return /*#__PURE__*/ React.createElement("i", {
                className: "nf nf-md-shield_lock_outline",
              });
            case "wifi":
              if (
                ((_networkOutput$defaul2 = networkOutput.defaultGateway) ===
                  null || _networkOutput$defaul2 === void 0
                  ? void 0
                  : _networkOutput$defaul2.signalStrength) >= 80
              ) {
                return /*#__PURE__*/ React.createElement("i", {
                  className: "nf nf-md-wifi_strength_4",
                });
              } else if (
                ((_networkOutput$defaul3 = networkOutput.defaultGateway) ===
                  null || _networkOutput$defaul3 === void 0
                  ? void 0
                  : _networkOutput$defaul3.signalStrength) >= 65
              ) {
                return /*#__PURE__*/ React.createElement("i", {
                  className: "nf nf-md-wifi_strength_3",
                });
              } else if (
                ((_networkOutput$defaul4 = networkOutput.defaultGateway) ===
                  null || _networkOutput$defaul4 === void 0
                  ? void 0
                  : _networkOutput$defaul4.signalStrength) >= 40
              ) {
                return /*#__PURE__*/ React.createElement("i", {
                  className: "nf nf-md-wifi_strength_2",
                });
              } else if (
                ((_networkOutput$defaul5 = networkOutput.defaultGateway) ===
                  null || _networkOutput$defaul5 === void 0
                  ? void 0
                  : _networkOutput$defaul5.signalStrength) >= 25
              ) {
                return /*#__PURE__*/ React.createElement("i", {
                  className: "nf nf-md-wifi_strength_1",
                });
              } else {
                return /*#__PURE__*/ React.createElement("i", {
                  className: "nf nf-md-wifi_strength_4", // CHANGED
                });
              }
            default:
              return /*#__PURE__*/ React.createElement("i", {
                className: "nf nf-md-wifi_strength_off_outline",
              });
          }
        }

        // Get icon to show for how much of the battery is charged.
        function getBatteryIcon(batteryOutput) {
          if (batteryOutput.chargePercent > 90)
            return /*#__PURE__*/ React.createElement("i", {
              className: "nf nf-fa-battery_4",
            });
          if (batteryOutput.chargePercent > 70)
            return /*#__PURE__*/ React.createElement("i", {
              className: "nf nf-fa-battery_3",
            });
          if (batteryOutput.chargePercent > 40)
            return /*#__PURE__*/ React.createElement("i", {
              className: "nf nf-fa-battery_2",
            });
          if (batteryOutput.chargePercent > 20)
            return /*#__PURE__*/ React.createElement("i", {
              className: "nf nf-fa-battery_1",
            });
          return /*#__PURE__*/ React.createElement("i", {
            className: "nf nf-fa-battery_0",
          });
        }

        // Get icon to show for current weather status.
        function getWeatherIcon(weatherOutput) {
          switch (weatherOutput.status) {
            case "clear_day":
              return /*#__PURE__*/ React.createElement("i", {
                className: "nf nf-weather-day_sunny",
              });
            case "clear_night":
              return /*#__PURE__*/ React.createElement("i", {
                className: "nf nf-weather-night_clear",
              });
            case "cloudy_day":
              return /*#__PURE__*/ React.createElement("i", {
                className: "nf nf-weather-day_cloudy",
              });
            case "cloudy_night":
              return /*#__PURE__*/ React.createElement("i", {
                className: "nf nf-weather-night_alt_cloudy",
              });
            case "light_rain_day":
              return /*#__PURE__*/ React.createElement("i", {
                className: "nf nf-weather-day_sprinkle",
              });
            case "light_rain_night":
              return /*#__PURE__*/ React.createElement("i", {
                className: "nf nf-weather-night_alt_sprinkle",
              });
            case "heavy_rain_day":
              return /*#__PURE__*/ React.createElement("i", {
                className: "nf nf-weather-day_rain",
              });
            case "heavy_rain_night":
              return /*#__PURE__*/ React.createElement("i", {
                className: "nf nf-weather-night_alt_rain",
              });
            case "snow_day":
              return /*#__PURE__*/ React.createElement("i", {
                className: "nf nf-weather-day_snow",
              });
            case "snow_night":
              return /*#__PURE__*/ React.createElement("i", {
                className: "nf nf-weather-night_alt_snow",
              });
            case "thunder_day":
              return /*#__PURE__*/ React.createElement("i", {
                className: "nf nf-weather-day_lightning",
              });
            case "thunder_night":
              return /*#__PURE__*/ React.createElement("i", {
                className: "nf nf-weather-night_alt_lightning",
              });
          }
        }
        return /*#__PURE__*/ React.createElement(
          "div",
          {
            className: "app",
          },
          /*#__PURE__*/ React.createElement(
            "div",
            {
              className: "left",
            },
            /*#__PURE__*/ React.createElement("i", {
              // className: "logo nf nf-fa-windows",
              className: "logo nf nf-oct-terminal",
            }),
            output.glazewm &&
              /*#__PURE__*/ React.createElement(
                "div",
                {
                  className: "workspaces",
                },
                output.glazewm.currentWorkspaces.map((workspace) => {
                  var _workspace$displayNam;
                  return /*#__PURE__*/ React.createElement(
                    "button",
                    {
                      className: "workspace "
                        .concat(workspace.hasFocus && "focused", " ")
                        .concat(workspace.isDisplayed && "displayed"),
                      onClick: () =>
                        output.glazewm.runCommand(
                          "focus --workspace ".concat(workspace.name)
                        ),
                      key: workspace.name,
                    },
                    (_workspace$displayNam = workspace.displayName) !== null &&
                      _workspace$displayNam !== void 0
                      ? _workspace$displayNam
                      : workspace.name
                  );
                })
              )
          ),
          /*#__PURE__*/ React.createElement(
            "div",
            {
              className: "center",
            },
            (_output$date = output.date) === null || _output$date === void 0
              ? void 0
              : _output$date.formatted +
                  " IST | " +
                  new Intl.DateTimeFormat("en-AU", {
                    hour: "2-digit",
                    minute: "2-digit",
                    second: "2-digit",
                    hour12: false,
                    timeZone: "Australia/Sydney", // AEDT/AEST auto
                  }).format(new Date()) +
                  " AEDT"
          ),
          /*#__PURE__*/ React.createElement(
            "div",
            {
              className: "right",
            },
            output.glazewm &&
              /*#__PURE__*/ React.createElement(
                React.Fragment,
                null,
                output.glazewm.isPaused &&
                  /*#__PURE__*/ React.createElement(
                    "button",
                    {
                      className: "paused-button",
                      onClick: () =>
                        output.glazewm.runCommand("wm-toggle-pause"),
                    },
                    "PAUSED"
                  ),
                output.glazewm.bindingModes.map((bindingMode) => {
                  var _bindingMode$displayN;
                  return /*#__PURE__*/ React.createElement(
                    "button",
                    {
                      className: "binding-mode",
                      key: bindingMode.name,
                      onClick: () =>
                        output.glazewm.runCommand(
                          "wm-disable-binding-mode --name ".concat(
                            bindingMode.name
                          )
                        ),
                    },
                    (_bindingMode$displayN = bindingMode.displayName) !==
                      null && _bindingMode$displayN !== void 0
                      ? _bindingMode$displayN
                      : bindingMode.name
                  );
                }),
                /*#__PURE__*/ React.createElement("button", {
                  className: "tiling-direction nf ".concat(
                    output.glazewm.tilingDirection === "horizontal"
                      ? "nf-md-swap_horizontal"
                      : "nf-md-swap_vertical"
                  ),
                  onClick: () =>
                    output.glazewm.runCommand("toggle-tiling-direction"),
                })
              ),
            output.network &&
              /*#__PURE__*/ React.createElement(
                "div",
                {
                  className: "network",
                },
                getNetworkIcon(output.network),
                (_output$network$defau = output.network.defaultGateway) ===
                  null || _output$network$defau === void 0
                  ? void 0
                  : _output$network$defau.ssid
              ),
            output.memory &&
              /*#__PURE__*/ React.createElement(
                "div",
                {
                  className: "memory",
                },
                /*#__PURE__*/ React.createElement("i", {
                  className: "nf nf-fae-chip",
                }),
                Math.round(output.memory.usage),
                "%"
              ),
            output.cpu &&
              /*#__PURE__*/ React.createElement(
                "div",
                {
                  className: "cpu",
                },
                /*#__PURE__*/ React.createElement("i", {
                  className: "nf nf-oct-cpu",
                }),
                /*#__PURE__*/ React.createElement(
                  "span",
                  {
                    className: output.cpu.usage > 85 ? "high-usage" : "",
                  },
                  Math.round(output.cpu.usage),
                  "%"
                )
              ),
            output.battery &&
              /*#__PURE__*/ React.createElement(
                "div",
                {
                  className: "battery",
                },
                output.battery.isCharging &&
                  /*#__PURE__*/ React.createElement("i", {
                    className: "nf nf-md-power_plug charging-icon",
                  }),
                getBatteryIcon(output.battery),
                Math.round(output.battery.chargePercent),
                "%"
              ),
            output.weather &&
              /*#__PURE__*/ React.createElement(
                "div",
                {
                  className: "weather",
                },
                getWeatherIcon(output.weather),
                Math.round(output.weather.celsiusTemp),
                "\xB0C"
              )
          )
        );
      }
      //# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJSZWFjdCIsInVzZVN0YXRlIiwidXNlRWZmZWN0IiwiY3JlYXRlUm9vdCIsInplYmFyIiwicHJvdmlkZXJzIiwiY3JlYXRlUHJvdmlkZXJHcm91cCIsIm5ldHdvcmsiLCJ0eXBlIiwiZ2xhemV3bSIsImNwdSIsImRhdGUiLCJmb3JtYXR0aW5nIiwiYmF0dGVyeSIsIm1lbW9yeSIsIndlYXRoZXIiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwicmVuZGVyIiwiY3JlYXRlRWxlbWVudCIsIkFwcCIsIl9vdXRwdXQkZGF0ZSIsIl9vdXRwdXQkbmV0d29yayRkZWZhdSIsIm91dHB1dCIsInNldE91dHB1dCIsIm91dHB1dE1hcCIsIm9uT3V0cHV0IiwiZ2V0TmV0d29ya0ljb24iLCJuZXR3b3JrT3V0cHV0IiwiX25ldHdvcmtPdXRwdXQkZGVmYXVsIiwiX25ldHdvcmtPdXRwdXQkZGVmYXVsMiIsIl9uZXR3b3JrT3V0cHV0JGRlZmF1bDMiLCJfbmV0d29ya091dHB1dCRkZWZhdWw0IiwiX25ldHdvcmtPdXRwdXQkZGVmYXVsNSIsImRlZmF1bHRJbnRlcmZhY2UiLCJjbGFzc05hbWUiLCJkZWZhdWx0R2F0ZXdheSIsInNpZ25hbFN0cmVuZ3RoIiwiZ2V0QmF0dGVyeUljb24iLCJiYXR0ZXJ5T3V0cHV0IiwiY2hhcmdlUGVyY2VudCIsImdldFdlYXRoZXJJY29uIiwid2VhdGhlck91dHB1dCIsInN0YXR1cyIsImN1cnJlbnRXb3Jrc3BhY2VzIiwibWFwIiwid29ya3NwYWNlIiwiX3dvcmtzcGFjZSRkaXNwbGF5TmFtIiwiY29uY2F0IiwiaGFzRm9jdXMiLCJpc0Rpc3BsYXllZCIsIm9uQ2xpY2siLCJydW5Db21tYW5kIiwibmFtZSIsImtleSIsImRpc3BsYXlOYW1lIiwiZm9ybWF0dGVkIiwiRnJhZ21lbnQiLCJpc1BhdXNlZCIsImJpbmRpbmdNb2RlcyIsImJpbmRpbmdNb2RlIiwiX2JpbmRpbmdNb2RlJGRpc3BsYXlOIiwidGlsaW5nRGlyZWN0aW9uIiwic3NpZCIsIk1hdGgiLCJyb3VuZCIsInVzYWdlIiwiaXNDaGFyZ2luZyIsImNlbHNpdXNUZW1wIl0sInNvdXJjZXMiOlsiSW5saW5lIEJhYmVsIHNjcmlwdCJdLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgIGltcG9ydCBSZWFjdCwge1xuICAgICAgICB1c2VTdGF0ZSxcbiAgICAgICAgdXNlRWZmZWN0LFxuICAgICAgfSBmcm9tICdodHRwczovL2VzbS5zaC9yZWFjdEAxOD9kZXYnO1xuICAgICAgaW1wb3J0IHsgY3JlYXRlUm9vdCB9IGZyb20gJ2h0dHBzOi8vZXNtLnNoL3JlYWN0LWRvbUAxOC9jbGllbnQ/ZGV2JztcbiAgICAgIGltcG9ydCAqIGFzIHplYmFyIGZyb20gJ2h0dHBzOi8vZXNtLnNoL3plYmFyQDMuMCc7XG5cbiAgICAgIGNvbnN0IHByb3ZpZGVycyA9IHplYmFyLmNyZWF0ZVByb3ZpZGVyR3JvdXAoe1xuICAgICAgICBuZXR3b3JrOiB7IHR5cGU6ICduZXR3b3JrJyB9LFxuICAgICAgICBnbGF6ZXdtOiB7IHR5cGU6ICdnbGF6ZXdtJyB9LFxuICAgICAgICBjcHU6IHsgdHlwZTogJ2NwdScgfSxcbiAgICAgICAgZGF0ZTogeyB0eXBlOiAnZGF0ZScsIGZvcm1hdHRpbmc6ICdFRUUgZCBNTU0gdCcgfSxcbiAgICAgICAgYmF0dGVyeTogeyB0eXBlOiAnYmF0dGVyeScgfSxcbiAgICAgICAgbWVtb3J5OiB7IHR5cGU6ICdtZW1vcnknIH0sXG4gICAgICAgIHdlYXRoZXI6IHsgdHlwZTogJ3dlYXRoZXInIH0sXG4gICAgICB9KTtcblxuICAgICAgY3JlYXRlUm9vdChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncm9vdCcpKS5yZW5kZXIoPEFwcCAvPik7XG5cbiAgICAgIGZ1bmN0aW9uIEFwcCgpIHtcbiAgICAgICAgY29uc3QgW291dHB1dCwgc2V0T3V0cHV0XSA9IHVzZVN0YXRlKHByb3ZpZGVycy5vdXRwdXRNYXApO1xuXG4gICAgICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgICAgcHJvdmlkZXJzLm9uT3V0cHV0KCgpID0+IHNldE91dHB1dChwcm92aWRlcnMub3V0cHV0TWFwKSk7XG4gICAgICAgIH0sIFtdKTtcblxuICAgICAgICAvLyBHZXQgaWNvbiB0byBzaG93IGZvciBjdXJyZW50IG5ldHdvcmsgc3RhdHVzLlxuICAgICAgICBmdW5jdGlvbiBnZXROZXR3b3JrSWNvbihuZXR3b3JrT3V0cHV0KSB7XG4gICAgICAgICAgc3dpdGNoIChuZXR3b3JrT3V0cHV0LmRlZmF1bHRJbnRlcmZhY2U/LnR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgJ2V0aGVybmV0JzpcbiAgICAgICAgICAgICAgcmV0dXJuIDxpIGNsYXNzTmFtZT1cIm5mIG5mLW1kLWV0aGVybmV0X2NhYmxlXCI+PC9pPjtcbiAgICAgICAgICAgIGNhc2UgJ3Byb3ByaWV0YXJ5X3ZpcnR1YWwnOlxuICAgICAgICAgICAgICByZXR1cm4gPGkgY2xhc3NOYW1lPVwibmYgbmYtbWQtc2hpZWxkX2xvY2tfb3V0bGluZVwiPjwvaT47XG4gICAgICAgICAgICBjYXNlICd3aWZpJzpcbiAgICAgICAgICAgICAgaWYgKG5ldHdvcmtPdXRwdXQuZGVmYXVsdEdhdGV3YXk/LnNpZ25hbFN0cmVuZ3RoID49IDgwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDxpIGNsYXNzTmFtZT1cIm5mIG5mLW1kLXdpZmlfc3RyZW5ndGhfNFwiPjwvaT47XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgbmV0d29ya091dHB1dC5kZWZhdWx0R2F0ZXdheT8uc2lnbmFsU3RyZW5ndGggPj0gNjVcbiAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDxpIGNsYXNzTmFtZT1cIm5mIG5mLW1kLXdpZmlfc3RyZW5ndGhfM1wiPjwvaT47XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgbmV0d29ya091dHB1dC5kZWZhdWx0R2F0ZXdheT8uc2lnbmFsU3RyZW5ndGggPj0gNDBcbiAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDxpIGNsYXNzTmFtZT1cIm5mIG5mLW1kLXdpZmlfc3RyZW5ndGhfMlwiPjwvaT47XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgbmV0d29ya091dHB1dC5kZWZhdWx0R2F0ZXdheT8uc2lnbmFsU3RyZW5ndGggPj0gMjVcbiAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDxpIGNsYXNzTmFtZT1cIm5mIG5mLW1kLXdpZmlfc3RyZW5ndGhfMVwiPjwvaT47XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDxpIGNsYXNzTmFtZT1cIm5mIG5mLW1kLXdpZmlfc3RyZW5ndGhfb3V0bGluZVwiPjwvaT47XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPVwibmYgbmYtbWQtd2lmaV9zdHJlbmd0aF9vZmZfb3V0bGluZVwiPjwvaT5cbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBHZXQgaWNvbiB0byBzaG93IGZvciBob3cgbXVjaCBvZiB0aGUgYmF0dGVyeSBpcyBjaGFyZ2VkLlxuICAgICAgICBmdW5jdGlvbiBnZXRCYXR0ZXJ5SWNvbihiYXR0ZXJ5T3V0cHV0KSB7XG4gICAgICAgICAgaWYgKGJhdHRlcnlPdXRwdXQuY2hhcmdlUGVyY2VudCA+IDkwKVxuICAgICAgICAgICAgcmV0dXJuIDxpIGNsYXNzTmFtZT1cIm5mIG5mLWZhLWJhdHRlcnlfNFwiPjwvaT47XG4gICAgICAgICAgaWYgKGJhdHRlcnlPdXRwdXQuY2hhcmdlUGVyY2VudCA+IDcwKVxuICAgICAgICAgICAgcmV0dXJuIDxpIGNsYXNzTmFtZT1cIm5mIG5mLWZhLWJhdHRlcnlfM1wiPjwvaT47XG4gICAgICAgICAgaWYgKGJhdHRlcnlPdXRwdXQuY2hhcmdlUGVyY2VudCA+IDQwKVxuICAgICAgICAgICAgcmV0dXJuIDxpIGNsYXNzTmFtZT1cIm5mIG5mLWZhLWJhdHRlcnlfMlwiPjwvaT47XG4gICAgICAgICAgaWYgKGJhdHRlcnlPdXRwdXQuY2hhcmdlUGVyY2VudCA+IDIwKVxuICAgICAgICAgICAgcmV0dXJuIDxpIGNsYXNzTmFtZT1cIm5mIG5mLWZhLWJhdHRlcnlfMVwiPjwvaT47XG4gICAgICAgICAgcmV0dXJuIDxpIGNsYXNzTmFtZT1cIm5mIG5mLWZhLWJhdHRlcnlfMFwiPjwvaT47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBHZXQgaWNvbiB0byBzaG93IGZvciBjdXJyZW50IHdlYXRoZXIgc3RhdHVzLlxuICAgICAgICBmdW5jdGlvbiBnZXRXZWF0aGVySWNvbih3ZWF0aGVyT3V0cHV0KSB7XG4gICAgICAgICAgc3dpdGNoICh3ZWF0aGVyT3V0cHV0LnN0YXR1cykge1xuICAgICAgICAgICAgY2FzZSAnY2xlYXJfZGF5JzpcbiAgICAgICAgICAgICAgcmV0dXJuIDxpIGNsYXNzTmFtZT1cIm5mIG5mLXdlYXRoZXItZGF5X3N1bm55XCI+PC9pPjtcbiAgICAgICAgICAgIGNhc2UgJ2NsZWFyX25pZ2h0JzpcbiAgICAgICAgICAgICAgcmV0dXJuIDxpIGNsYXNzTmFtZT1cIm5mIG5mLXdlYXRoZXItbmlnaHRfY2xlYXJcIj48L2k+O1xuICAgICAgICAgICAgY2FzZSAnY2xvdWR5X2RheSc6XG4gICAgICAgICAgICAgIHJldHVybiA8aSBjbGFzc05hbWU9XCJuZiBuZi13ZWF0aGVyLWRheV9jbG91ZHlcIj48L2k+O1xuICAgICAgICAgICAgY2FzZSAnY2xvdWR5X25pZ2h0JzpcbiAgICAgICAgICAgICAgcmV0dXJuIDxpIGNsYXNzTmFtZT1cIm5mIG5mLXdlYXRoZXItbmlnaHRfYWx0X2Nsb3VkeVwiPjwvaT47XG4gICAgICAgICAgICBjYXNlICdsaWdodF9yYWluX2RheSc6XG4gICAgICAgICAgICAgIHJldHVybiA8aSBjbGFzc05hbWU9XCJuZiBuZi13ZWF0aGVyLWRheV9zcHJpbmtsZVwiPjwvaT47XG4gICAgICAgICAgICBjYXNlICdsaWdodF9yYWluX25pZ2h0JzpcbiAgICAgICAgICAgICAgcmV0dXJuIDxpIGNsYXNzTmFtZT1cIm5mIG5mLXdlYXRoZXItbmlnaHRfYWx0X3Nwcmlua2xlXCI+PC9pPjtcbiAgICAgICAgICAgIGNhc2UgJ2hlYXZ5X3JhaW5fZGF5JzpcbiAgICAgICAgICAgICAgcmV0dXJuIDxpIGNsYXNzTmFtZT1cIm5mIG5mLXdlYXRoZXItZGF5X3JhaW5cIj48L2k+O1xuICAgICAgICAgICAgY2FzZSAnaGVhdnlfcmFpbl9uaWdodCc6XG4gICAgICAgICAgICAgIHJldHVybiA8aSBjbGFzc05hbWU9XCJuZiBuZi13ZWF0aGVyLW5pZ2h0X2FsdF9yYWluXCI+PC9pPjtcbiAgICAgICAgICAgIGNhc2UgJ3Nub3dfZGF5JzpcbiAgICAgICAgICAgICAgcmV0dXJuIDxpIGNsYXNzTmFtZT1cIm5mIG5mLXdlYXRoZXItZGF5X3Nub3dcIj48L2k+O1xuICAgICAgICAgICAgY2FzZSAnc25vd19uaWdodCc6XG4gICAgICAgICAgICAgIHJldHVybiA8aSBjbGFzc05hbWU9XCJuZiBuZi13ZWF0aGVyLW5pZ2h0X2FsdF9zbm93XCI+PC9pPjtcbiAgICAgICAgICAgIGNhc2UgJ3RodW5kZXJfZGF5JzpcbiAgICAgICAgICAgICAgcmV0dXJuIDxpIGNsYXNzTmFtZT1cIm5mIG5mLXdlYXRoZXItZGF5X2xpZ2h0bmluZ1wiPjwvaT47XG4gICAgICAgICAgICBjYXNlICd0aHVuZGVyX25pZ2h0JzpcbiAgICAgICAgICAgICAgcmV0dXJuIDxpIGNsYXNzTmFtZT1cIm5mIG5mLXdlYXRoZXItbmlnaHRfYWx0X2xpZ2h0bmluZ1wiPjwvaT47XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFwcFwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJsZWZ0XCI+XG4gICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT1cImxvZ28gbmYgbmYtZmEtd2luZG93c1wiPjwvaT5cbiAgICAgICAgICAgICAge291dHB1dC5nbGF6ZXdtICYmIChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIndvcmtzcGFjZXNcIj5cbiAgICAgICAgICAgICAgICAgIHtvdXRwdXQuZ2xhemV3bS5jdXJyZW50V29ya3NwYWNlcy5tYXAod29ya3NwYWNlID0+IChcbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YHdvcmtzcGFjZSAke3dvcmtzcGFjZS5oYXNGb2N1cyAmJiAnZm9jdXNlZCd9ICR7d29ya3NwYWNlLmlzRGlzcGxheWVkICYmICdkaXNwbGF5ZWQnfWB9XG4gICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dC5nbGF6ZXdtLnJ1bkNvbW1hbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGBmb2N1cyAtLXdvcmtzcGFjZSAke3dvcmtzcGFjZS5uYW1lfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIGtleT17d29ya3NwYWNlLm5hbWV9XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICB7d29ya3NwYWNlLmRpc3BsYXlOYW1lID8/IHdvcmtzcGFjZS5uYW1lfVxuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2VudGVyXCI+e291dHB1dC5kYXRlPy5mb3JtYXR0ZWR9PC9kaXY+XG5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmlnaHRcIj5cbiAgICAgICAgICAgICAge291dHB1dC5nbGF6ZXdtICYmIChcbiAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAge291dHB1dC5nbGF6ZXdtLmlzUGF1c2VkICYmIChcbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInBhdXNlZC1idXR0b25cIlxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+XG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXQuZ2xhemV3bS5ydW5Db21tYW5kKCd3bS10b2dnbGUtcGF1c2UnKVxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgIFBBVVNFRFxuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICB7b3V0cHV0LmdsYXpld20uYmluZGluZ01vZGVzLm1hcChiaW5kaW5nTW9kZSA9PiAoXG4gICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJiaW5kaW5nLW1vZGVcIlxuICAgICAgICAgICAgICAgICAgICAgIGtleT17YmluZGluZ01vZGUubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0LmdsYXpld20ucnVuQ29tbWFuZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgYHdtLWRpc2FibGUtYmluZGluZy1tb2RlIC0tbmFtZSAke2JpbmRpbmdNb2RlLm5hbWV9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICB7YmluZGluZ01vZGUuZGlzcGxheU5hbWUgPz8gYmluZGluZ01vZGUubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICApKX1cblxuICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2B0aWxpbmctZGlyZWN0aW9uIG5mICR7XG4gICAgICAgICAgICAgICAgICAgICAgb3V0cHV0LmdsYXpld20udGlsaW5nRGlyZWN0aW9uID09PSAnaG9yaXpvbnRhbCdcbiAgICAgICAgICAgICAgICAgICAgICAgID8gJ25mLW1kLXN3YXBfaG9yaXpvbnRhbCdcbiAgICAgICAgICAgICAgICAgICAgICAgIDogJ25mLW1kLXN3YXBfdmVydGljYWwnXG4gICAgICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PlxuICAgICAgICAgICAgICAgICAgICAgIG91dHB1dC5nbGF6ZXdtLnJ1bkNvbW1hbmQoJ3RvZ2dsZS10aWxpbmctZGlyZWN0aW9uJylcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgPjwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICApfVxuXG4gICAgICAgICAgICAgIHtvdXRwdXQubmV0d29yayAmJiAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJuZXR3b3JrXCI+XG4gICAgICAgICAgICAgICAgICB7Z2V0TmV0d29ya0ljb24ob3V0cHV0Lm5ldHdvcmspfVxuICAgICAgICAgICAgICAgICAge291dHB1dC5uZXR3b3JrLmRlZmF1bHRHYXRld2F5Py5zc2lkfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApfVxuXG4gICAgICAgICAgICAgIHtvdXRwdXQubWVtb3J5ICYmIChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1lbW9yeVwiPlxuICAgICAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPVwibmYgbmYtZmFlLWNoaXBcIj48L2k+XG4gICAgICAgICAgICAgICAgICB7TWF0aC5yb3VuZChvdXRwdXQubWVtb3J5LnVzYWdlKX0lXG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICl9XG5cbiAgICAgICAgICAgICAge291dHB1dC5jcHUgJiYgKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY3B1XCI+XG4gICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9XCJuZiBuZi1vY3QtY3B1XCI+PC9pPlxuXG4gICAgICAgICAgICAgICAgICB7LyogQ2hhbmdlIHRoZSB0ZXh0IGNvbG9yIGlmIHRoZSBDUFUgdXNhZ2UgaXMgaGlnaC4gKi99XG4gICAgICAgICAgICAgICAgICA8c3BhblxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e291dHB1dC5jcHUudXNhZ2UgPiA4NSA/ICdoaWdoLXVzYWdlJyA6ICcnfVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICB7TWF0aC5yb3VuZChvdXRwdXQuY3B1LnVzYWdlKX0lXG4gICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICl9XG5cbiAgICAgICAgICAgICAge291dHB1dC5iYXR0ZXJ5ICYmIChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJhdHRlcnlcIj5cbiAgICAgICAgICAgICAgICAgIHsvKiBTaG93IGljb24gZm9yIHdoZXRoZXIgYmF0dGVyeSBpcyBjaGFyZ2luZy4gKi99XG4gICAgICAgICAgICAgICAgICB7b3V0cHV0LmJhdHRlcnkuaXNDaGFyZ2luZyAmJiAoXG4gICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT1cIm5mIG5mLW1kLXBvd2VyX3BsdWcgY2hhcmdpbmctaWNvblwiPjwvaT5cbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICB7Z2V0QmF0dGVyeUljb24ob3V0cHV0LmJhdHRlcnkpfVxuICAgICAgICAgICAgICAgICAge01hdGgucm91bmQob3V0cHV0LmJhdHRlcnkuY2hhcmdlUGVyY2VudCl9JVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApfVxuXG4gICAgICAgICAgICAgIHtvdXRwdXQud2VhdGhlciAmJiAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3ZWF0aGVyXCI+XG4gICAgICAgICAgICAgICAgICB7Z2V0V2VhdGhlckljb24ob3V0cHV0LndlYXRoZXIpfVxuICAgICAgICAgICAgICAgICAge01hdGgucm91bmQob3V0cHV0LndlYXRoZXIuY2Vsc2l1c1RlbXApfcKwQ1xuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgIl0sIm1hcHBpbmdzIjoiQUFDTSxPQUFPQSxLQUFLLElBQ1ZDLFFBQVEsRUFDUkMsU0FBUyxRQUNKLDZCQUE2QjtBQUNwQyxTQUFTQyxVQUFVLFFBQVEsd0NBQXdDO0FBQ25FLE9BQU8sS0FBS0MsS0FBSyxNQUFNLDBCQUEwQjtBQUVqRCxJQUFNQyxTQUFTLEdBQUdELEtBQUssQ0FBQ0UsbUJBQW1CLENBQUM7RUFDMUNDLE9BQU8sRUFBRTtJQUFFQyxJQUFJLEVBQUU7RUFBVSxDQUFDO0VBQzVCQyxPQUFPLEVBQUU7SUFBRUQsSUFBSSxFQUFFO0VBQVUsQ0FBQztFQUM1QkUsR0FBRyxFQUFFO0lBQUVGLElBQUksRUFBRTtFQUFNLENBQUM7RUFDcEJHLElBQUksRUFBRTtJQUFFSCxJQUFJLEVBQUUsTUFBTTtJQUFFSSxVQUFVLEVBQUU7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
    </script>
  </head>
  <body>
    <div id="root">
      <div class="app">
        <div class="left">
          <!-- <i class="logo nf nf-fa-windows"></i> -->
          <i class="logo nf nf-oct-terminal"></i>
          <div class="workspaces">
            <button class="workspace focused displayed">1</button>
          </div>
        </div>
        <div class="center">Wed, 26 Jan 21:12:04</div>
        <div class="right">
          <button class="tiling-direction nf nf-md-swap_horizontal"></button>
          <div class="network">
            <i class="nf nf-md-wifi_strength_4"></i>
          </div>
          <div class="memory"><i class="nf nf-fae-chip"></i>69%</div>
          <div class="cpu">
            <i class="nf nf-oct-cpu"></i><span class="">69%</span>
          </div>
          <div class="battery"><i class="nf nf-fa-battery_2"></i>69%</div>
          <div class="weather"><i class="nf nf-weather-day_sunny"></i>69°C</div>
        </div>
      </div>
    </div>

    <script type="text/babel" data-type="module">
      import React, { useState, useEffect } from "https://esm.sh/react@18?dev";
      import { createRoot } from "https://esm.sh/react-dom@18/client?dev";
      import * as zebar from "https://esm.sh/zebar@3.0";

      const providers = zebar.createProviderGroup({
        network: { type: "network" },
        glazewm: { type: "glazewm" },
        cpu: { type: "cpu" },
        date: { type: "date", formatting: "EEE, d MMM TT" },
        battery: { type: "battery" },
        memory: { type: "memory" },
        weather: { type: "weather" },
      });

      function formatAEDT(date) {
        return new Intl.DateTimeFormat("en-AU", {
          hour: "2-digit",
          minute: "2-digit",
          second: "2-digit",
          hour12: false,
          timeZone: "Australia/Sydney", // auto AEDT/AEST
        }).format(date);
      }

      createRoot(document.getElementById("root")).render(<App />);

      function App() {
        const [output, setOutput] = useState(providers.outputMap);

        useEffect(() => {
          providers.onOutput(() => setOutput(providers.outputMap));
        }, []);

        // Get icon to show for current network status.
        function getNetworkIcon(networkOutput) {
          switch (networkOutput.defaultInterface?.type) {
            case "ethernet":
              return <i className="nf nf-md-ethernet_cable"></i>;
            case "proprietary_virtual":
              return <i className="nf nf-md-shield_lock_outline"></i>;
            case "wifi":
              if (networkOutput.defaultGateway?.signalStrength >= 80) {
                return <i className="nf nf-md-wifi_strength_4"></i>;
              } else if (networkOutput.defaultGateway?.signalStrength >= 65) {
                return <i className="nf nf-md-wifi_strength_3"></i>;
              } else if (networkOutput.defaultGateway?.signalStrength >= 40) {
                return <i className="nf nf-md-wifi_strength_2"></i>;
              } else if (networkOutput.defaultGateway?.signalStrength >= 25) {
                return <i className="nf nf-md-wifi_strength_1"></i>;
              } else {
                return <i className="nf nf-md-wifi_strength_4"></i>; // CHANGED
              }
            default:
              return <i className="nf nf-md-wifi_strength_off_outline"></i>;
          }
        }

        // Get icon to show for how much of the battery is charged.
        function getBatteryIcon(batteryOutput) {
          if (batteryOutput.chargePercent > 90)
            return <i className="nf nf-fa-battery_4"></i>;
          if (batteryOutput.chargePercent > 70)
            return <i className="nf nf-fa-battery_3"></i>;
          if (batteryOutput.chargePercent > 40)
            return <i className="nf nf-fa-battery_2"></i>;
          if (batteryOutput.chargePercent > 20)
            return <i className="nf nf-fa-battery_1"></i>;
          return <i className="nf nf-fa-battery_0"></i>;
        }

        // Get icon to show for current weather status.
        function getWeatherIcon(weatherOutput) {
          switch (weatherOutput.status) {
            case "clear_day":
              return <i className="nf nf-weather-day_sunny"></i>;
            case "clear_night":
              return <i className="nf nf-weather-night_clear"></i>;
            case "cloudy_day":
              return <i className="nf nf-weather-day_cloudy"></i>;
            case "cloudy_night":
              return <i className="nf nf-weather-night_alt_cloudy"></i>;
            case "light_rain_day":
              return <i className="nf nf-weather-day_sprinkle"></i>;
            case "light_rain_night":
              return <i className="nf nf-weather-night_alt_sprinkle"></i>;
            case "heavy_rain_day":
              return <i className="nf nf-weather-day_rain"></i>;
            case "heavy_rain_night":
              return <i className="nf nf-weather-night_alt_rain"></i>;
            case "snow_day":
              return <i className="nf nf-weather-day_snow"></i>;
            case "snow_night":
              return <i className="nf nf-weather-night_alt_snow"></i>;
            case "thunder_day":
              return <i className="nf nf-weather-day_lightning"></i>;
            case "thunder_night":
              return <i className="nf nf-weather-night_alt_lightning"></i>;
          }
        }

        return (
          <div className="app">
            <div className="left">
              <i className="logo nf nf-oct-terminal"></i>
              {output.glazewm && (
                <div className="workspaces">
                  {output.glazewm.currentWorkspaces.map((workspace) => (
                    <button
                      className={`workspace ${
                        workspace.hasFocus && "focused"
                      } ${workspace.isDisplayed && "displayed"}`}
                      onClick={() =>
                        output.glazewm.runCommand(
                          `focus --workspace ${workspace.name}`
                        )
                      }
                      key={workspace.name}
                    >
                      {workspace.displayName ?? workspace.name}
                    </button>
                  ))}
                </div>
              )}
            </div>

            <div className="center">
              {output.date?.formatted && (
                <>
                  {output.date.formatted} IST&nbsp;|&nbsp;
                  {formatAEDT(new Date())} AEDT
                </>
              )}
            </div>

            <div className="right">
              {output.glazewm && (
                <>
                  {output.glazewm.isPaused && (
                    <button
                      className="paused-button"
                      onClick={() =>
                        output.glazewm.runCommand("wm-toggle-pause")
                      }
                    >
                      PAUSED
                    </button>
                  )}
                  {output.glazewm.bindingModes.map((bindingMode) => (
                    <button
                      className="binding-mode"
                      key={bindingMode.name}
                      onClick={() =>
                        output.glazewm.runCommand(
                          `wm-disable-binding-mode --name ${bindingMode.name}`
                        )
                      }
                    >
                      {bindingMode.displayName ?? bindingMode.name}
                    </button>
                  ))}

                  <button
                    className={`tiling-direction nf ${
                      output.glazewm.tilingDirection === "horizontal"
                        ? "nf-md-swap_horizontal"
                        : "nf-md-swap_vertical"
                    }`}
                    onClick={() =>
                      output.glazewm.runCommand("toggle-tiling-direction")
                    }
                  ></button>
                </>
              )}

              {output.network && (
                <div className="network">
                  {getNetworkIcon(output.network)}
                  {output.network.defaultGateway?.ssid}
                </div>
              )}

              {output.memory && (
                <div className="memory">
                  <i className="nf nf-fae-chip"></i>
                  {Math.round(output.memory.usage)}%
                </div>
              )}

              {output.cpu && (
                <div className="cpu">
                  <i className="nf nf-oct-cpu"></i>

                  {/* Change the text color if the CPU usage is high. */}
                  <span className={output.cpu.usage > 85 ? "high-usage" : ""}>
                    {Math.round(output.cpu.usage)}%
                  </span>
                </div>
              )}

              {output.battery && (
                <div className="battery">
                  {/* Show icon for whether battery is charging. */}
                  {output.battery.isCharging && (
                    <i className="nf nf-md-power_plug charging-icon"></i>
                  )}
                  {getBatteryIcon(output.battery)}
                  {Math.round(output.battery.chargePercent)}%
                </div>
              )}

              {output.weather && (
                <div className="weather">
                  {getWeatherIcon(output.weather)}
                  {Math.round(output.weather.celsiusTemp)}°C
                </div>
              )}
            </div>
          </div>
        );
      }
    </script>
  </body>
</html>
